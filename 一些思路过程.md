AI辅助测试点生成-作业流：
1、参照TestMate交互方式，通过附屏实现人机交互
2、TSE在作业流中，通过AI辅助测试点生成，唤起附屏
3、附屏第一部分：需求列表：展示当前TS涉及的所有需求列表，支持用户切换选择需求
4、附屏第二部分：配置信息：展示当前可用的测试点生成workflow(已提前在配置中心配好)，支持用户切换选择
5、附屏第三部分：测试点生成workflow输出：用户选择了具体workflow后，后台服务传递参数，调用workflow，获取并条目化展示workflow返回的内容，内容为prompt模板和模板中涉及的占位参数变量内容
6、附屏第四部分：拼装替换prompt模版，发起模型调用（模型id平台后台已在数据库配置好）
7、附屏第五部分：模型输出过程内容，流式在页面呈现，输出的json结构化数据，在页面条目化呈现
8、附屏第六部分：页面有 接受  按钮，用户可批量选择 第五部分呈现的条目内容并接收
9、附屏第七部分：有输入框，若第五部分生成的条目不及预期，用户可以在输出框中补充信息并重新生成
10、用户接收AI生成数据后，需要回填原作业系统、上报公司运营平台


AI辅助测试用例改写生成-作业流：
1、参照TestMate交互方式，通过附屏实现人机交互
2、TSE在作业流中，通过在TP->测试用例生成->新增用例列表->勾选一个样例用例，触发AI辅助测试点生成，唤起附屏。若用户勾选多个用例，前端提示限制信息。
3、附屏第一部分：用例信息：展示勾选的样例用例基础信息（设计描述、预制条件、测试步骤等）
4、附屏第二部分：待改写用例列表：展示当前TP下所有的新增用例，支持用户批量勾选要改写的用例

4、附屏第三部分：配置信息：展示当前可用的测试用例改写workflow(已提前在配置中心配好)，支持用户切换选择
5、附屏第四部分：测试点生成workflow输出：用户选择了具体workflow后，后台服务传递参数，调用workflow，获取并条目化展示workflow返回的内容，内容为prompt模板和模板中涉及的占位参数变量内容
6、附屏第五部分：拼装替换prompt模版，发起模型调用（模型id平台后台已在数据库配置好）
7、附屏第六部分：模型输出过程内容，流式在页面呈现，输出的json结构化数据，在页面条目化呈现
8、附屏第七部分：页面有 接受  按钮，用户可批量选择 第六部分呈现的条目内容并接收。支持查看diff，diff呈现方式为表格方式，维度为 用例编号、预制步骤、测试步骤、预期结果等，呈现改写前后的内容
9、附屏第八部分：有输入框，若第六部分生成的条目不及预期，用户可以在输出框中补充信息并重新生成
10、用户接收AI生成数据后，需要回填原作业系统、上报公司运营平台

## 基于相似用例检索的全测试脚本生成
背景：测试用例是由多个测试步骤和校验点组成的，24年我们探索的单步骤测试代码生成，再基于步骤拼接生成整个测试代码，存在步骤间一致性不足问题，25年探索基于相似用例用例检索的全脚本生成，经由分组UPCF团队和数据工程团队同事联合探索实验，再测试集上测评结果为，全脚本生成准确率由63%提升到了78%，故需要将此方案固化到TestMate（IDE插件）中，本次对工程化方案进行详细设计。
1、相似用例检索
- 版本用例入统一的RAG库，入库接口已有TMSS团队提供，TestMateApp上提供出发入口，支持用户选择多个CIDA用例版本入库
- TestMateAapp页面：提供相似用例检索配置项：包括TOP数量，检索参数（用例名称、用例编号、预制步骤、测试步骤、预期结果字段），步骤覆盖重排序阈值
- TestAgent服务（java）:支持暴露相似用例检索接口，接收用例名称、用例编号、预制步骤、测试步骤、预期结果、用例版本等用例基本信息，获取该用例版本的检索配置，对接RAG服务获取并返回检索结果
2、全脚本生成流程
主要在pycharm上，通过TestMate插件的方式生成。
TestMate插件主要包含两部分，左侧提供一个用例视图，右侧体一个Agent视图
- 用例视图：从CIDA获取用例树，支持用户勾选用例触发脚本生成，不用展开设计
- Agent视图：一个附屏页面，用户触发脚本生成后，页面依次展示内容如下
1)任务描述：脚本生成任务：用例编号列表
2）人工指定全局的相似用例：支持人工操作文件选择组件，选择多个用例（最大5个）
3）继续流程，批量生成脚本
4）逐一生成待生成的脚本
-- 调用TestAgent的相似用例检索接口，获取相似用例列表，基于用例编号与本地文件名相同，匹配本地脚本，拿到最多TOP5个相似脚本。相似脚本可以在IDE页面上呈现，若不足5个，用户可以手工新增选择
-- 调用TestAgent中脚本生成接口：传递带生成脚本信息+相似脚本内容。接口内部有3步骤：步骤1：使用基于相似用例生成脚本prompt，调用用户从IDE页面上选中的模型生成脚本 步骤2：提取用例中的步骤，做相似步骤检索，针对每一个步骤检索到TOP3相似步骤 步骤3：将步骤1生成代码和步骤2检索结果，拼接到基于相似步骤生成prompt中，调用用户从IDE页面上选中的模型生成脚本
-- 每一个生成的脚本，需要在附屏呈现，用户可以选择 接受 或 拒绝
5）附屏最下放有一个待审查文件列表：用户可以在生成中或者批量生成结束后，查看文件diff，单个接受、拒绝，或者全部接受、全部拒绝

